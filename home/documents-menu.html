<!-- documents-menu.html -->
<style>
  /* ===== Bottom Sheet: Documenti (animazione fluida) ===== */
  .docs-sheet {
  position: fixed; inset: 0; z-index: 9998;
  /* Niente display:none: usiamo visibility/opacity per permettere la transizione */
  visibility: hidden; opacity: 0; pointer-events: none;
  transition: opacity .22s ease;
  }
  .docs-sheet.is-open { visibility: visible; opacity: 1; pointer-events: auto; }
  .docs-backdrop {
  position: absolute; inset: 0;
  background: rgba(0,0,0,.6);
  opacity: 0; transition: opacity .22s ease;
  backdrop-filter: blur(2px);
  }
  .docs-sheet.is-open .docs-backdrop { opacity: 1; }
  .docs-panel {
  position: absolute; left: 0; right: 0; bottom: 0;
  background: #0b0b0b; color: #fff;
  border-top-left-radius: 16px; border-top-right-radius: 16px;
  padding: 12px 16px calc(16px + env(safe-area-inset-bottom));
  max-height: 80vh; overflow: auto;
  /* Stato iniziale: fuori dallo schermo */
  transform: translateY(100%);
  /* Transizione pi√π ‚Äúmorbida‚Äù */
  transition: transform .32s cubic-bezier(.2,.8,.2,1);
  box-shadow: 0 -10px 30px rgba(0,0,0,.35);
  will-change: transform;
  }
  .docs-sheet.is-open .docs-panel { transform: translateY(0); }
  .docs-handle { width: 44px; height: 5px; border-radius: 999px; background: rgba(255,255,255,.25); margin: 6px auto 10px; }
  .docs-title { margin: 0 0 6px; font-size: 1.1rem; }
  .docs-desc { margin: 0 0 12px; opacity: .85; }
  .docs-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
  .docs-item a {
  display: flex; align-items: center; gap: 10px;
  padding: 12px; border-radius: 12px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.14);
  color: #fff; text-decoration: none; outline: none;
  }
  .docs-item a span {font-weight: 600;}
  .docs-item a:hover { background: rgba(255,255,255,.12); }
  .docs-item small { opacity: .8; font-weight: 400; }
  .docs-close {
  position: absolute; right: 10px; top: 8px;
  border: none; background: rgba(255,255,255,.08);
  color: #fff; font-size: 18px; padding: 6px 10px;
  border-radius: 10px; cursor: pointer;
  }
  @media (min-width: 800px) {
  .docs-panel { left: 50%; width: 640px; transform: translateY(100%) translateX(-50%); }
  .docs-sheet.is-open .docs-panel { transform: translateY(0) translateX(-50%); }
  }
  @media (prefers-reduced-motion: reduce) {
  .docs-panel, .docs-backdrop, .docs-sheet { transition: none !important; }
  }
</style>
<div id="documentsSheet" class="docs-sheet" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="docsTitle">
  <div class="docs-backdrop" data-close="true"></div>
  <div class="docs-panel">
    <button class="docs-close" aria-label="Chiudi elenco" data-close="true">‚úï</button>
    <div class="docs-handle" aria-hidden="true"></div>
    <h3 id="docsTitle" class="docs-title">Tomi di Rhymil</h3>
    <p class="docs-desc"> </p>
    <ul class="docs-list">
      <!-- Sostituisci gli href con i tuoi percorsi reali -->
      <li class="docs-item">
        <a href="https://rhymil.arcanadomine.it/assets/pdf/TOMO-I-Regolamento-base.pdf" target="_blank" rel="noopener">
        üìï <span>Tomo 1</span> - Regolamento base
        </a>
      </li>
      <li class="docs-item">
        <a href="https://rhymil.arcanadomine.it/assets/pdf/TOMO-II-Ambientazione.pdf" target="_blank" rel="noopener">
        üìò <span>Tomo 2</span> - Ambientazione
        </a>
      </li>
      <li class="docs-item">
        <a href="https://rhymil.arcanadomine.it/assets/pdf/TOMO-III-Incantesimi.pdf" target="_blank" rel="noopener">
        üìó <span>Tomo 3</span> - Incantesimi
        </a>
      </li>
      <li class="docs-item">
        <a href="https://rhymil.arcanadomine.it/assets/pdf/TOMO-IV-Compendio.pdf" target="_blank" rel="noopener">
        üìî <span>Tomo 4</span> - Compendio
        </a>
      </li>
      <li class="docs-item">
        <a href="https://rhymil.arcanadomine.it/assets/pdf/TOMO-V-Alberi-dei-talenti.pdf" target="_blank" rel="noopener">
        üìô <span>Tomo 5</span> - Talenti
        </a>
      </li>
    </ul>
  </div>
</div>
<script>
  (function initDocumentsSheet(){
    const trigger = document.getElementById('listDocuments');   // bottone nella tua pagina
    const sheet   = document.getElementById('documentsSheet');
    if (!trigger || !sheet) return;
  
    const panel   = sheet.querySelector('.docs-panel');
    const backdrop= sheet.querySelector('.docs-backdrop');
    const closeEls= sheet.querySelectorAll('[data-close]');
    const firstLink = sheet.querySelector('.docs-item a');
  
    function openSheet() {
      sheet.classList.add('is-open');
      sheet.setAttribute('aria-hidden', 'false');
      document.documentElement.style.overflow = 'hidden';
      setTimeout(() => firstLink?.focus(), 50);
    }
    function closeSheet() {
      sheet.classList.remove('is-open');
      sheet.setAttribute('aria-hidden', 'true');
      document.documentElement.style.overflow = '';
      trigger.focus?.();
    }
  
    trigger.addEventListener('click', openSheet);
    backdrop.addEventListener('click', closeSheet);
    closeEls.forEach(el => el.addEventListener('click', closeSheet));
    window.addEventListener('keydown', e => { if (e.key === 'Escape' && sheet.classList.contains('is-open')) closeSheet(); });
  
    // Chiudi con "trascina in basso" (smooth)
  let startY = null, currentY = null, dragging = false;
  
  panel.addEventListener('touchstart', e => {
  dragging = true;
  startY = e.touches[0].clientY;
  currentY = startY;
  // disabilita la transizione durante il drag per evitare ritardi
  panel.style.transition = 'none';
  }, {passive:true});
  
  panel.addEventListener('touchmove', e => {
  if (!dragging) return;
  currentY = e.touches[0].clientY;
  const dy = Math.max(0, currentY - startY);
  panel.style.transform = `translateY(${dy}px)`;
  }, {passive:true});
  
  panel.addEventListener('touchend', () => {
  if (!dragging) return;
  const dy = Math.max(0, currentY - startY);
  // ripristina la transizione e lo stato
  panel.style.transition = '';
  panel.style.transform = '';
  dragging = false; startY = currentY = null;
  
  // soglia di chiusura
  if (dy > 100) closeSheet();
  });
  
  })();
</script>