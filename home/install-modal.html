<style>
  .install-modal { position: fixed; inset: 0; display: none; z-index: 9999; }
  .install-modal.is-open { display: block; }
  .install-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.6); backdrop-filter: blur(2px); }
  .install-dialog {
  position: relative;
  margin: 0;
  inset: 0;
  width: 100%;
  height: 100%;
  background: #0b0b0b; /* in linea col tuo tema */
  color: #fff;
  overflow: auto;
  padding: 18px 16px 28px;
  }
  .install-close {
  position: sticky; top: 0; float: right;
  border: none; background: rgba(255,255,255,.08);
  color: #fff; font-size: 22px; line-height: 1;
  padding: 8px 12px; border-radius: 10px; cursor: pointer;
  }
  .install-dialog h2 { margin: 12px 0 8px; font-size: 1.4rem; }
  .install-tabs { display: flex; gap: 8px; margin: 12px 0 16px; }
  .install-tabs .tab {
  flex: 0 0 auto; padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(255,255,255,.2);
  background: transparent; color: #fff; cursor: pointer; font-weight: 600;
  }
  .install-tabs .tab.is-active { background: #fff; color: #000; }
  .install-panel { max-width: 960px; margin: 0 auto; }
  .install-panel[hidden] { display: none !important; }
  .install-panel.is-active { display: block; }
  .steps { counter-reset: step; margin: 0 0 12px 0; padding: 0 0 0 1.2em; }
  .steps li { margin: 6px 0; }
  .steps li::marker { font-weight: 700; }
  .shots { display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 10px; margin-top: 12px; }
  .shots img {
  width: 100%; height: auto; border-radius: 14px; border: 1px solid rgba(255,255,255,.5);
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
  }
  .hint { opacity: .8; font-size: .95rem; margin-top: 10px; }
  /* Layout piccolo */
  @media (max-width: 640px) {
  .shots { grid-template-columns: 1fr; }
  .install-dialog { padding: 14px; }
  }
</style>
<!-- Modal guida installazione -->
<div id="installModal" class="install-modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="install-backdrop" data-close="true"></div>
  <div class="install-dialog" role="document" aria-labelledby="installTitle">
    <button class="install-close" aria-label="Chiudi guida" data-close="true">✕</button>
    <h2 id="installTitle">Come installare Rhymil Hub sul tuo dispositivo</h2>
    <p>
      Questa pagina è una WebApp. Puoi aggiungerla alla schermata Home del tuo telefono come una normale app, così la apri più in fretta e la hai sempre a portata di mano. Si aggiorna da sola quando pubblichiamo novità. Seleziona il tuo dispositivo e segui i passaggi in pochi click.
    </p>
    <div class="install-tabs" role="tablist" aria-label="Piattaforma">
      <button class="tab is-active" role="tab" aria-selected="true" data-tab="ios">iPhone / iPad</button>
      <button class="tab" role="tab" aria-selected="false" data-tab="android">Android</button>
    </div>
    <!-- iOS -->
    <div class="install-panel is-active" data-panel="ios" role="tabpanel">
      <ol class="steps">
        <li>Apri Rhymil Hub in <strong>Safari</strong> su iOS.</li>
        <li>Tocca il pulsante <strong>Condividi</strong> <span class="ios-share" aria-hidden="true">⬆︎</span>.</li>
        <li>Scegli <strong>Aggiungi alla schermata Home</strong>.</li>
        <li>Conferma con <strong>Aggiungi</strong>.</li>
      </ol>
      <div class="shots">
        <img src="./home/install-modal-ios.png" alt="">
      </div>
    </div>
    <!-- Android -->
    <div class="install-panel" data-panel="android" role="tabpanel" hidden>
      <ol class="steps">
        <li>Apri Rhymil Hub in <strong>Chrome</strong> su Android.</li>
        <li>Tocca il menu <strong>⋮</strong> in alto a destra.</li>
        <li>Scegli <strong>Aggiungi alla schermata Home</strong> (oppure <strong>Installa app</strong> su alcuni dispositivi).</li>
        <li>Conferma con <strong>Aggiungi</strong>.</li>
      </ol>
      <div class="shots">
        <img src="./home/install-modal-android.png" alt="">
      </div>
    </div>
  </div>
</div>
<script>
  (function(){
    const modal = document.getElementById('installModal');
    const btn = document.getElementById('installBtn');
    if (!modal || !btn) return;
  
    const backdrop = modal.querySelector('.install-backdrop');
    const closeBtns = modal.querySelectorAll('[data-close]');
    const tabs = Array.from(modal.querySelectorAll('.install-tabs .tab'));
    const panels = Array.from(modal.querySelectorAll('.install-panel'));
  
    // Apri modale
    btn.addEventListener('click', () => {
      modal.classList.add('is-open');
      document.documentElement.style.overflow = 'hidden';
    });
  
    // Chiudi modale
    function closeModal() {
      modal.classList.remove('is-open');
      document.documentElement.style.overflow = '';
    }
    backdrop.addEventListener('click', closeModal);
    closeBtns.forEach(b => b.addEventListener('click', closeModal));
    window.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
  
    // Tabs iOS / Android
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const target = tab.getAttribute('data-tab');
        tabs.forEach(t => t.classList.toggle('is-active', t === tab));
        panels.forEach(p => {
          const match = p.getAttribute('data-panel') === target;
          p.hidden = !match;
          p.classList.toggle('is-active', match);
        });
      });
    });
  })();
</script>